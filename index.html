<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shree Ram Travels - Home</title>
  <link rel="icon" href="assets/icons/favicon.ico">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/tailwind.css">
  <!-- Preload logo so splash screen shows instantly with no image flash -->
  <link rel="preload" href="assets/icons/shree-ram-logo.png" as="image" fetchpriority="high">
  <!-- Load data.js early so API calls fire as fast as possible -->
  <script src="js/data.js"></script>

  <style>
    /* ========== SPLASH SCREEN ========== */
    #splash-screen {
      position: fixed;
      inset: 0;
      z-index: 99999;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 40%, #0f172a 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      transition: opacity 0.7s ease, visibility 0.7s ease;
    }
    #splash-screen.fade-out {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }
    .splash-stars {
      position: absolute;
      inset: 0;
      background-image:
        radial-gradient(1px 1px at 120px 45px, rgba(255,255,255,0.4) 0%, transparent 100%),
        radial-gradient(1px 1px at 250px 120px, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 380px 60px, rgba(255,255,255,0.5) 0%, transparent 100%),
        radial-gradient(1px 1px at 520px 200px, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 680px 80px, rgba(255,255,255,0.4) 0%, transparent 100%),
        radial-gradient(1px 1px at 820px 160px, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 200px 380px, rgba(255,255,255,0.4) 0%, transparent 100%),
        radial-gradient(1px 1px at 450px 320px, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 700px 400px, rgba(255,255,255,0.5) 0%, transparent 100%),
        radial-gradient(1px 1px at 60px 500px, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 340px 480px, rgba(255,255,255,0.4) 0%, transparent 100%),
        radial-gradient(1px 1px at 600px 520px, rgba(255,255,255,0.3) 0%, transparent 100%);
    }
    @keyframes splashLogoIn {
      from { opacity: 0; transform: translateY(-30px) scale(0.85); }
      to   { opacity: 1; transform: translateY(0) scale(1); }
    }
    /* ‚îÄ‚îÄ Logo race scene (no road, no flag) ‚îÄ‚îÄ */
    .splash-scene {
      position: relative;
      width: 100vw;
      height: 140px;
      display: flex;
      align-items: center;
    }

    /* ‚îÄ‚îÄ Slogan: sits in the middle of the scene, fully hidden initially ‚îÄ‚îÄ
       The logo (z-index 10) flies OVER it. As the logo's right edge passes
       each part of the text, that part gets revealed via clip-path.        ‚îÄ‚îÄ */
    .splash-slogan-wrap {
      position: absolute;
      left: 0; right: 0;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1;        /* BELOW the logo */
      pointer-events: none;
    }
    .splash-slogan-text {
      font-family: 'Poppins', sans-serif;
      font-size: 1.05rem;
      font-weight: 700;
      color: rgba(255, 255, 255, 0.65);
      letter-spacing: 0.3em;
      text-transform: uppercase;
      white-space: nowrap;
      clip-path: inset(0 100% 0 0);   /* start fully hidden */
    }
    .splash-slogan-glow {
      position: absolute;
      top: 0; bottom: 0;
      width: 90px;
      background: linear-gradient(90deg, transparent, rgba(255,107,53,0.7), rgba(255,180,80,0.2));
      filter: blur(8px);
      z-index: 2;
      opacity: 0;
      pointer-events: none;
    }

    /* ‚îÄ‚îÄ Logo (the moving "bus") ‚Äî z-index above slogan ‚îÄ‚îÄ */
    .splash-bus-wrap {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      z-index: 10;
      animation: busRace 3.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.5s both;
    }
    @keyframes busRace {
      0%   { left: -260px; }
      38%  { left: calc(50vw - 105px); animation-timing-function: cubic-bezier(0.33, 1, 0.68, 1); }
      62%  { left: calc(50vw - 105px); }
      100% { left: calc(100vw + 60px); }
    }

    /* Speed lines ‚Äî flash on fast exit */
    .splash-speed-lines {
      position: absolute;
      inset: 0;
      pointer-events: none;
      animation: speedLinesShow 3.4s ease 0.5s both;
    }
    @keyframes speedLinesShow {
      0%,36%  { opacity: 0; }
      38%,62% { opacity: 0; }
      64%,88% { opacity: 1; }
      100%    { opacity: 0; }
    }
    .splash-speed-lines span {
      position: absolute;
      left: 0; right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.06) 30%, rgba(255,255,255,0.14) 60%, transparent 100%);
      animation: speedLine 0.16s linear infinite;
    }
    .splash-speed-lines span:nth-child(1) { top: 30%; animation-delay: 0s; }
    .splash-speed-lines span:nth-child(2) { top: 44%; animation-delay: 0.04s; }
    .splash-speed-lines span:nth-child(3) { top: 55%; animation-delay: 0.09s; }
    .splash-speed-lines span:nth-child(4) { top: 65%; animation-delay: 0.02s; }
    .splash-speed-lines span:nth-child(5) { top: 72%; animation-delay: 0.07s; }
    @keyframes speedLine {
      from { transform: translateX(6%); }
      to   { transform: translateX(-6%); }
    }
    /* Logo flying across as the "bus" */
    .splash-logo-mover {
      width: 210px;
      height: auto;
      display: block;
      position: relative;
      z-index: 10; /* above the slogan text */
      filter:
        drop-shadow(0 0 22px rgba(255,107,53,0.8))
        drop-shadow(0 0 50px rgba(255,107,53,0.4))
        drop-shadow(0 6px 14px rgba(0,0,0,0.5));
      animation: logoFloat 0.5s ease-in-out infinite alternate;
    }
    @keyframes logoFloat {
      from { transform: translateY(0px) rotate(-1deg); }
      to   { transform: translateY(-6px) rotate(1deg); }
    }
    /* Motion trail behind logo */
    .splash-logo-trail {
      position: absolute;
      top: 50%;
      right: 100%;
      transform: translateY(-50%);
      height: 50px;
      width: 0;
      background: linear-gradient(90deg, transparent, rgba(255,107,53,0.06), rgba(255,107,53,0.2));
      border-radius: 4px;
      pointer-events: none;
      animation: trailGrow 3.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.5s both;
    }
    @keyframes trailGrow {
      0%       { width: 0; opacity: 0; }
      15%      { width: 130px; opacity: 1; }
      38%, 62% { width: 55px; opacity: 0.35; }
      64%      { width: 230px; opacity: 1; }
      100%     { width: 300px; opacity: 0.85; }
    }
    .splash-loading {
      margin-top: 2.5rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      animation: splashLogoIn 0.6s ease 1s both;
    }
    .splash-loading-text {
      font-size: 0.7rem;
      color: rgba(255,255,255,0.35);
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }
    .splash-dots { display: flex; gap: 5px; }
    .splash-dots span {
      width: 5px; height: 5px;
      border-radius: 50%;
      background: #ff6b35;
      animation: dotPulse 1.2s ease-in-out infinite;
    }
    .splash-dots span:nth-child(2) { animation-delay: 0.2s; }
    .splash-dots span:nth-child(3) { animation-delay: 0.4s; }
    @keyframes dotPulse {
      0%, 80%, 100% { opacity: 0.2; transform: scale(0.8); }
      40% { opacity: 1; transform: scale(1.2); }
    }
    /* Main content hidden until splash done */
    #main-content {
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    #main-content.visible { opacity: 1; }
  </style>
</head>
<body>

  <!-- ======== SPLASH SCREEN ======== -->
  <div id="splash-screen">
    <div class="splash-stars"></div>

    <div class="splash-scene">
      <!-- Speed lines on fast exit -->
      <div class="splash-speed-lines">
        <span></span><span></span><span></span><span></span><span></span>
      </div>

      <!-- Slogan: centred in scene, z-index BELOW logo, revealed as logo passes -->
      <div class="splash-slogan-wrap" id="sloganWrap">
        <div class="splash-slogan-text" id="sloganText">YOUR JOURNEY, OUR PRIDE</div>
        <div class="splash-slogan-glow" id="sloganGlow"></div>
      </div>

      <!-- Logo: z-index ABOVE slogan, flies left ‚Üí right -->
      <div class="splash-bus-wrap" id="busWrap">
        <div class="splash-logo-trail"></div>
        <img src="assets/icons/shree-ram-logo.png"
             class="splash-logo-mover"
             alt="Shree Ram Travels"
             width="210" loading="eager" decoding="sync">
      </div>
    </div>

    <div class="splash-loading">
      <div class="splash-loading-text">Loading</div>
      <div class="splash-dots"><span></span><span></span><span></span></div>
    </div>
  </div>
  <!-- ======== END SPLASH ======== -->


  <!-- ======== MAIN CONTENT ======== -->
  <div id="main-content">

    <nav class="navbar">
      <div class="container">
        <div class="nav-content">
          <a href="index.html" class="nav-brand">
            <img src="assets/icons/shree-ram-logo.png" alt="Shree Ram Travels" style="height: 50px;">
          </a>
          <button class="mobile-menu-btn" id="mobile-menu-btn">‚ò∞</button>
          <ul class="nav-links" id="mobile-menu">
            <li><a href="index.html" class="nav-link active">Home</a></li>
            <li><a href="timings.html" class="nav-link">Bus Timings</a></li>
            <li><a href="admin.html" class="nav-link">Admin</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <section class="hero">
      <div class="hero-bg">
        <img src="https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?q=80&w=2069&auto=format&fit=crop" alt="Luxury Bus Travel">
      </div>
      <div class="hero-overlay"></div>
      <div class="hero-content">
        <h1 class="hero-title">
          Journey with <span class="highlight">Comfort</span>
        </h1>
        <p class="hero-subtitle">
          Experience the finest bus travel across India. Luxury sleepers, AC coaches, and on-time service.
        </p>
      </div>
    </section>

    <section class="container px-4">
      <div class="booking-card animate-on-scroll">
        <h2 style="font-size: 1.5rem; margin-bottom: 1.5rem; text-align: center; color: var(--secondary);">
          Search Bus Schedules
        </h2>
        <form class="booking-form" onsubmit="searchBuses(event)">
          <div class="form-group">
            <label class="form-label">From</label>
            <select class="form-select" id="search-origin" required>
              <option value="">Select Origin City</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">To</label>
            <select class="form-select" id="search-destination" required>
              <option value="">Select Destination City</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Date</label>
            <input type="date" class="form-input" id="search-date" required>
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-primary btn-lg btn-block">Search Buses</button>
          </div>
        </form>
      </div>
    </section>

    <section style="background: white; padding: 6rem 0; border-top: 1px solid var(--slate-100);">
      <div class="container px-4" style="display: grid; grid-template-columns: 1fr; gap: 3rem;">
        <div>
          <h2 style="margin-bottom: 1.5rem;">Track Your Ticket Status</h2>
          <p class="text-muted" style="font-size: 1.125rem; margin-bottom: 2rem;">
            Enter your booking token ID to check live status, view seat details, or download your ticket.
          </p>
          <form onsubmit="trackTicket(event)" style="max-width: 500px;">
            <div style="display: flex; gap: 1rem;">
              <input type="text" class="form-input" id="track-token" placeholder="Enter Token ID (e.g. TKT-123)" style="height: 3rem; font-size: 1rem;">
              <button type="submit" class="btn btn-primary btn-lg">Track</button>
            </div>
          </form>
          <div id="track-result" style="margin-top: 2rem;"></div>
        </div>
      </div>
    </section>

    <section class="py-8" style="padding-top: 6rem; padding-bottom: 6rem;">
      <div class="container px-4">
        <div class="text-center mb-8" style="margin-bottom: 4rem;">
          <h2 style="margin-bottom: 1rem;">Why Choose Shree Ram Travels?</h2>
          <div style="height: 4px; width: 80px; background: var(--primary); margin: 0 auto; border-radius: 2px;"></div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3" style="gap: 2rem;">
          <div class="card animate-on-scroll" style="text-align: center;">
            <div style="height: 64px; width: 64px; background: rgba(255,107,53,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem; color: var(--primary); font-size: 2rem;">üõ°Ô∏è</div>
            <h3 style="font-size: 1.25rem; margin-bottom: 0.75rem;">Safe & Secure</h3>
            <p class="text-muted">Sanitized buses & verified drivers</p>
          </div>
          <div class="card animate-on-scroll" style="text-align: center;">
            <div style="height: 64px; width: 64px; background: rgba(255,107,53,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem; color: var(--primary); font-size: 2rem;">‚è∞</div>
            <h3 style="font-size: 1.25rem; margin-bottom: 0.75rem;">On Time</h3>
            <p class="text-muted">Punctual departures and arrivals guaranteed</p>
          </div>
          <div class="card animate-on-scroll" style="text-align: center;">
            <div style="height: 64px; width: 64px; background: rgba(255,107,53,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem; color: var(--primary); font-size: 2rem;">üìç</div>
            <h3 style="font-size: 1.25rem; margin-bottom: 0.75rem;">Live Tracking</h3>
            <p class="text-muted">Track your bus in real-time with GPS</p>
          </div>
        </div>
      </div>
    </section>

    <section style="background: var(--slate-50); padding: 6rem 0; border-top: 1px solid var(--slate-100);">
      <div class="container px-4">
        <div class="text-center" style="margin-bottom: 3rem;">
          <h2 style="margin-bottom: 1rem;">Find Our Office</h2>
          <p class="text-muted" style="font-size: 1.1rem;">üìç New Shri Ram Travels, VPO Nathuawala, Dehradun, Uttarakhand 248004</p>
          <div style="height: 4px; width: 80px; background: var(--primary); margin: 1rem auto 0; border-radius: 2px;"></div>
        </div>
        <div style="border-radius: 1rem; overflow: hidden; box-shadow: var(--shadow); border: 1px solid var(--slate-100); max-width: 900px; margin: 0 auto;">
          <iframe
            src="https://maps.google.com/maps?width=625&height=325&hl=en&q=shree ram tours and travels&t=&z=15&ie=UTF8&iwloc=B&output=embed"
            width="100%" height="400" style="border:0; display:block;"
            allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
          </iframe>
        </div>
        <div style="text-align:center; margin-top: 1.5rem; display:flex; gap:1rem; justify-content:center; flex-wrap:wrap;">
          <a href="https://maps.google.com/maps?q=shree+ram+tours+and+travels&z=15" target="_blank" class="btn btn-primary">üó∫Ô∏è Open in Google Maps</a>
          <a href="https://maps.google.com/maps?q=shree+ram+tours+and+travels&z=15&dirflg=d" target="_blank" class="btn btn-outline">üß≠ Get Directions</a>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div class="container px-4">
        <div class="footer-grid">
          <div>
            <img src="assets/icons/shree-ram-logo.png" alt="Shree Ram Travels" style="height: 60px; margin-bottom: 1rem;">
            <p style="color: var(--slate-400); font-size: 0.875rem; margin-bottom: 0.75rem;">
              Connecting cities, connecting hearts. The most trusted bus operator in the region.
            </p>
            <p style="color: var(--slate-400); font-size: 0.8rem; line-height: 1.6;">
              üìç New Shri Ram Travels,<br>VPO Nathuawala, Dehradun,<br>Uttarakhand 248004
            </p>
          </div>
          <div>
            <h4>Quick Links</h4>
            <ul>
              <li><a href="timings.html">Bus Timings</a></li>
              <li><a href="admin.html">Operator Login</a></li>
              <li><a href="terms.html">Terms &amp; Conditions</a></li>
            </ul>
          </div>
          <div>
            <h4>Contact</h4>
            <ul style="color: var(--slate-400); font-size: 0.875rem;">
              <li><a href="mailto:shreeram@example.com" style="color: var(--slate-400); text-decoration: none;">‚úâÔ∏è shreeram@example.com</a></li>
              <li><a href="tel:+919870995956" style="color: var(--slate-400); text-decoration: none;">üìû +91 98709 95956</a></li>
            </ul>
          </div>
        </div>
        <div style="border-top: 1px solid rgba(255,255,255,0.1); margin-top: 2rem; padding-top: 1.5rem; text-align: center;">
          <p style="color: var(--slate-500); font-size: 0.8rem;">
            ¬© 2025 Shree Ram Travels. All rights reserved. |
            <a href="terms.html" style="color: var(--slate-400); text-decoration: none;">Terms &amp; Conditions</a>
          </p>
        </div>
      </div>
    </footer>

  </div><!-- end #main-content -->

  <script src="js/main.js"></script>
  <script>
    // ‚îÄ‚îÄ‚îÄ Splash & Background Data Loading ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    var citiesDataPromise = null;

    function preloadCityData() {
      citiesDataPromise = Promise.all([
        getOriginCities(),
        getDestinationCities()
      ]);
      return citiesDataPromise;
    }

    // Kick off API calls RIGHT NOW ‚Äî don't wait for DOMContentLoaded
    // By the time the splash animation ends (3.5s), data will be long ready on any decent connection
    preloadCityData();

    async function populateCityDropdowns() {
      try {
        var results = await citiesDataPromise;
        var origins = results[0];
        var destinations = results[1];

        var originSelect = document.getElementById('search-origin');
        var destinationSelect = document.getElementById('search-destination');

        originSelect.innerHTML = '<option value="">From City</option>';
        destinationSelect.innerHTML = '<option value="">To City</option>';

        origins.forEach(function(city) {
          var o = document.createElement('option');
          o.value = city; o.textContent = city;
          originSelect.appendChild(o);
        });
        destinations.forEach(function(city) {
          var o = document.createElement('option');
          o.value = city; o.textContent = city;
          destinationSelect.appendChild(o);
        });
      } catch (error) {
        console.error('Error loading cities:', error);
        showToast('Failed to load cities. Please refresh.', 'error');
      }
    }

    function dismissSplash() {
      var splash = document.getElementById('splash-screen');
      var content = document.getElementById('main-content');
      splash.classList.add('fade-out');
      content.classList.add('visible');
      setTimeout(function() { splash.remove(); }, 800);
    }

    // ‚îÄ‚îÄ Slogan reveal: logo overlaps slogan (higher z-index) and uncovers it as it passes ‚îÄ‚îÄ
    // Every frame we read the logo's RIGHT edge pixel position.
    // The slogan text is centered on screen. We clip it so only the part
    // the logo has already passed is visible ‚Äî creating the "written by the logo" effect.
    (function() {
      var textEl = document.getElementById('sloganText');
      var glowEl = document.getElementById('sloganGlow');
      var busEl  = document.getElementById('busWrap');
      if (!textEl || !glowEl || !busEl) return;

      function tick() {
        var busRect  = busEl.getBoundingClientRect();
        var logoRight = busRect.right;  // right edge of logo in viewport px

        var textRect  = textEl.getBoundingClientRect();
        var textLeft  = textRect.left;
        var textWidth = textRect.width || textEl.scrollWidth;

        // How much of the text has the logo's right edge already passed?
        var passed = logoRight - textLeft;
        var pct    = Math.max(0, Math.min(passed / textWidth, 1));

        // Reveal exactly that fraction from the left
        var rightPct = (1 - pct) * 100;
        textEl.style.clipPath = 'inset(0 ' + rightPct.toFixed(2) + '% 0 0)';

        // Glow sits right at the leading reveal edge
        if (pct > 0.01 && pct < 0.99) {
          var wrapRect = glowEl.parentElement.getBoundingClientRect();
          glowEl.style.left    = (logoRight - wrapRect.left - 80) + 'px';
          glowEl.style.opacity = '1';
        } else {
          glowEl.style.opacity = '0';
        }

        // Keep animating while logo is on screen
        if (logoRight < window.innerWidth + 320) {
          requestAnimationFrame(tick);
        } else {
          glowEl.style.opacity = '0';
        }
      }

      // Kick off just before animation starts (busRace has 0.5s delay)
      setTimeout(function() {
        requestAnimationFrame(tick);
      }, 380);
    })();

    document.addEventListener('DOMContentLoaded', function() {
      // Data fetch already started above ‚Äî no need to call again

      // Set date defaults
      var dateInput = document.getElementById('search-date');
      if (dateInput) {
        dateInput.min = new Date().toISOString().split('T')[0];
        dateInput.value = new Date().toISOString().split('T')[0];
      }

      // 3. Wait for BOTH: minimum splash display time + data ready
      //    Bus animation is 3.4s (0.5s delay + 2.9s race). We wait exactly that.
      //    On fast connections data is ready well before ‚Äî so splash dismisses right at animation end.
      //    On slow connections data may take longer ‚Äî splash waits for it too (no loading screen shown).
      var SPLASH_DURATION = 3500; // matches bus animation length exactly, no extra padding

      Promise.all([
        citiesDataPromise.catch(function() { return [[], []]; }),
        new Promise(function(resolve) { setTimeout(resolve, SPLASH_DURATION); })
      ]).then(function() {
        populateCityDropdowns();
        dismissSplash();
      });
    });

    // ‚îÄ‚îÄ‚îÄ Search ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    function searchBuses(e) {
      e.preventDefault();
      var origin = document.getElementById('search-origin').value;
      var destination = document.getElementById('search-destination').value;
      var date = document.getElementById('search-date').value;
      if (!origin || !destination || !date) {
        showToast('Please fill all search fields', 'warning');
        return;
      }
      navigateTo('timings.html', { origin: origin, destination: destination, date: date });
    }

    // ‚îÄ‚îÄ‚îÄ Track Ticket ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    async function trackTicket(e) {
      e.preventDefault();
      var token = document.getElementById('track-token').value.trim();
      if (!token) { showToast('Please enter a booking token', 'warning'); return; }
      var resultDiv = document.getElementById('track-result');
      try {
        showLoading();
        var booking = await getBookingByToken(token);
        hideLoading();
        if (booking) {
          var schedule = booking.scheduleId ?
            (typeof booking.scheduleId === 'object' ? booking.scheduleId : await getScheduleById(booking.scheduleId))
            : null;
          resultDiv.innerHTML = '<div style="background:#D1FAE5;border:1px solid #A7F3D0;border-radius:0.75rem;padding:1.5rem;"><h4 style="color:#065F46;font-weight:700;margin-bottom:1rem;">Booking Confirmed!</h4><div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;font-size:0.875rem;"><div><span style="display:block;color:#047857;font-size:0.75rem;text-transform:uppercase;">Passenger</span><span style="font-weight:600;">' + booking.customerName + '</span></div><div><span style="display:block;color:#047857;font-size:0.75rem;text-transform:uppercase;">Seats</span><span style="font-weight:600;">' + booking.seatNumbers.join(', ') + '</span></div><div><span style="display:block;color:#047857;font-size:0.75rem;text-transform:uppercase;">Amount</span><span style="font-weight:600;">&#8377;' + booking.totalAmount + '</span></div><div><span style="display:block;color:#047857;font-size:0.75rem;text-transform:uppercase;">Bus</span><span style="font-weight:600;">' + (schedule ? schedule.busName : 'N/A') + '</span></div></div></div>';
          showToast('Booking found!', 'success');
        } else {
          resultDiv.innerHTML = '<div style="background:#FEE2E2;border:1px solid #FECACA;border-radius:0.75rem;padding:1.5rem;text-align:center;color:#991B1B;"><strong>Booking not found!</strong><br>Please check your booking token and try again.</div>';
          showToast('Booking not found', 'error');
        }
      } catch (error) {
        hideLoading();
        resultDiv.innerHTML = '<div style="background:#FEE2E2;border:1px solid #FECACA;border-radius:0.75rem;padding:1.5rem;text-align:center;color:#991B1B;"><strong>Error!</strong><br>Unable to track booking. Please try again.</div>';
        showToast('Error tracking booking', 'error');
      }
    }
  </script>
</body>
</html>