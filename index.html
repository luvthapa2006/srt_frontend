<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shree Ram Travels - Home</title>
  <link rel="icon" href="assets/icons/favicon.ico">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/tailwind.css">

  <style>
    /* ========== SPLASH SCREEN ========== */
    #splash-screen {
      position: fixed;
      inset: 0;
      z-index: 99999;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 40%, #0f172a 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      transition: opacity 0.7s ease, visibility 0.7s ease;
    }
    #splash-screen.fade-out {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }
    .splash-stars {
      position: absolute;
      inset: 0;
      background-image:
        radial-gradient(1px 1px at 120px 45px, rgba(255,255,255,0.4) 0%, transparent 100%),
        radial-gradient(1px 1px at 250px 120px, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 380px 60px, rgba(255,255,255,0.5) 0%, transparent 100%),
        radial-gradient(1px 1px at 520px 200px, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 680px 80px, rgba(255,255,255,0.4) 0%, transparent 100%),
        radial-gradient(1px 1px at 820px 160px, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 200px 380px, rgba(255,255,255,0.4) 0%, transparent 100%),
        radial-gradient(1px 1px at 450px 320px, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 700px 400px, rgba(255,255,255,0.5) 0%, transparent 100%),
        radial-gradient(1px 1px at 60px 500px, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 340px 480px, rgba(255,255,255,0.4) 0%, transparent 100%),
        radial-gradient(1px 1px at 600px 520px, rgba(255,255,255,0.3) 0%, transparent 100%);
    }
    .splash-logo-wrap {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.4rem;
      margin-bottom: 3rem;
      animation: splashLogoIn 0.8s cubic-bezier(0.22, 1, 0.36, 1) 0.2s both;
    }
    @keyframes splashLogoIn {
      from { opacity: 0; transform: translateY(-30px) scale(0.85); }
      to   { opacity: 1; transform: translateY(0) scale(1); }
    }
    .splash-logo-wrap img {
      height: 80px;
      filter: drop-shadow(0 0 20px rgba(255,107,53,0.5));
    }
    .splash-brand-name {
      font-family: 'Poppins', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: white;
      letter-spacing: 0.04em;
      text-shadow: 0 0 30px rgba(255,107,53,0.5);
    }
    .splash-tagline {
      font-family: 'Inter', sans-serif;
      font-size: 0.8rem;
      color: rgba(255,255,255,0.45);
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }
    .splash-road-scene {
      position: relative;
      width: 100vw;
      height: 130px;
      display: flex;
      align-items: flex-end;
    }
    .splash-road {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 48px;
      background: #1e293b;
      border-top: 3px solid #334155;
    }
    .splash-road-line {
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 3px;
      transform: translateY(-50%);
      background: repeating-linear-gradient(90deg, #f59e0b 0px, #f59e0b 40px, transparent 40px, transparent 80px);
      animation: roadScroll 0.28s linear infinite;
    }
    @keyframes roadScroll {
      from { transform: translateY(-50%) translateX(0); }
      to   { transform: translateY(-50%) translateX(-80px); }
    }
    .splash-ground {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #f59e0b, #ef4444, #f59e0b);
      box-shadow: 0 0 12px rgba(245,158,11,0.5);
    }
    .splash-bus-wrap {
      position: absolute;
      bottom: 52px;
      animation: busRace 3.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.5s both;
    }
    @keyframes busRace {
      0%   { left: -320px; }
      38%  { left: calc(50vw - 100px); animation-timing-function: cubic-bezier(0.33, 1, 0.68, 1); }
      62%  { left: calc(50vw - 100px); }
      100% { left: calc(100vw + 60px); }
    }
    .splash-destination {
      position: absolute;
      right: 90px;
      bottom: 48px;
      display: flex;
      flex-direction: column;
      align-items: center;
      animation: flagAppear 0.5s ease 2.6s both;
    }
    @keyframes flagAppear {
      from { opacity: 0; transform: scale(0.5) translateY(12px); }
      to   { opacity: 1; transform: scale(1) translateY(0); }
    }
    .splash-flag-pole {
      width: 3px;
      height: 52px;
      background: #94a3b8;
      border-radius: 2px;
      position: relative;
    }
    .splash-flag-wave {
      position: absolute;
      top: 0;
      left: 3px;
      width: 36px;
      height: 20px;
      background: linear-gradient(135deg, #ff6b35, #ef4444);
      border-radius: 0 4px 4px 0;
      animation: flagWave 0.4s ease-in-out infinite alternate;
      transform-origin: left center;
    }
    @keyframes flagWave {
      from { transform: skewY(-3deg); }
      to   { transform: skewY(4deg); }
    }
    .splash-flag-label {
      margin-top: 4px;
      font-size: 0.58rem;
      color: rgba(255,255,255,0.45);
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }
    .splash-speed-lines {
      position: absolute;
      inset: 0;
      pointer-events: none;
      animation: speedLinesShow 3.4s ease 0.5s both;
    }
    @keyframes speedLinesShow {
      0%,36%  { opacity: 0; }
      38%,62% { opacity: 0; }
      64%,88% { opacity: 1; }
      100%    { opacity: 0; }
    }
    .splash-speed-lines span {
      position: absolute;
      left: 0; right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.06) 30%, rgba(255,255,255,0.14) 60%, transparent 100%);
      animation: speedLine 0.16s linear infinite;
    }
    .splash-speed-lines span:nth-child(1) { top: 30%; animation-delay: 0s; }
    .splash-speed-lines span:nth-child(2) { top: 44%; animation-delay: 0.04s; }
    .splash-speed-lines span:nth-child(3) { top: 55%; animation-delay: 0.09s; }
    .splash-speed-lines span:nth-child(4) { top: 65%; animation-delay: 0.02s; }
    .splash-speed-lines span:nth-child(5) { top: 72%; animation-delay: 0.07s; }
    @keyframes speedLine {
      from { transform: translateX(6%); }
      to   { transform: translateX(-6%); }
    }
    .exhaust-puff {
      position: absolute;
      top: 20px;
      right: calc(100% + 4px);
      width: 10px; height: 10px;
      border-radius: 50%;
      background: rgba(148,163,184,0.25);
      animation: exhaustPuff 0.5s ease-out infinite;
    }
    .exhaust-puff:nth-child(2) { animation-delay: 0.17s; width: 7px; height: 7px; top: 24px; }
    .exhaust-puff:nth-child(3) { animation-delay: 0.34s; width: 5px; height: 5px; top: 18px; }
    @keyframes exhaustPuff {
      0%   { opacity: 0.6; transform: translateX(0) scale(1); }
      100% { opacity: 0; transform: translateX(-28px) scale(2.4); }
    }
    .bus-svg {
      width: 210px;
      height: 82px;
      filter: drop-shadow(0 4px 18px rgba(255,107,53,0.4)) drop-shadow(0 0 35px rgba(255,107,53,0.12));
    }
    .bus-wheel {
      animation: wheelSpin 0.22s linear infinite;
      transform-box: fill-box;
      transform-origin: center;
    }
    @keyframes wheelSpin {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }
    .bus-headlight {
      animation: headlightPulse 0.7s ease-in-out infinite alternate;
    }
    @keyframes headlightPulse {
      from { opacity: 0.75; }
      to   { opacity: 1; }
    }
    .splash-loading {
      margin-top: 2.5rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      animation: splashLogoIn 0.6s ease 1s both;
    }
    .splash-loading-text {
      font-size: 0.7rem;
      color: rgba(255,255,255,0.35);
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }
    .splash-dots { display: flex; gap: 5px; }
    .splash-dots span {
      width: 5px; height: 5px;
      border-radius: 50%;
      background: #ff6b35;
      animation: dotPulse 1.2s ease-in-out infinite;
    }
    .splash-dots span:nth-child(2) { animation-delay: 0.2s; }
    .splash-dots span:nth-child(3) { animation-delay: 0.4s; }
    @keyframes dotPulse {
      0%, 80%, 100% { opacity: 0.2; transform: scale(0.8); }
      40% { opacity: 1; transform: scale(1.2); }
    }
    /* Main content hidden until splash done */
    #main-content {
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    #main-content.visible { opacity: 1; }
  </style>
</head>
<body>

  <!-- ======== SPLASH SCREEN ======== -->
  <div id="splash-screen">
    <div class="splash-stars"></div>

    <div class="splash-logo-wrap">
      <img src="https://i.ibb.co/TqYcn7bS/shree-ram-logo-new.png" alt="Shree Ram Travels">
      <div class="splash-brand-name">Shree Ram Travels</div>
      <div class="splash-tagline">Your journey, our pride</div>
    </div>

    <div class="splash-road-scene">
      <div class="splash-speed-lines">
        <span></span><span></span><span></span><span></span><span></span>
      </div>

      <div class="splash-road">
        <div class="splash-road-line"></div>
      </div>
      <div class="splash-ground"></div>

      <div class="splash-destination">
        <div class="splash-flag-pole">
          <div class="splash-flag-wave"></div>
        </div>
        <div class="splash-flag-label">Destination</div>
      </div>

      <div class="splash-bus-wrap">
        <div class="exhaust-puff"></div>
        <div class="exhaust-puff"></div>
        <div class="exhaust-puff"></div>

        <svg class="bus-svg" viewBox="0 0 210 82" fill="none" xmlns="http://www.w3.org/2000/svg">
          <!-- Body -->
          <rect x="8" y="8" width="182" height="54" rx="6" fill="#1e40af"/>
          <!-- Roof highlight -->
          <rect x="12" y="8" width="174" height="9" rx="4" fill="#2563eb"/>
          <!-- Orange accent stripe -->
          <rect x="8" y="30" width="182" height="6" fill="#ff6b35"/>
          <!-- Front panel -->
          <rect x="172" y="8" width="18" height="54" rx="4" fill="#1d4ed8"/>
          <!-- Windows -->
          <rect x="16" y="13" width="22" height="14" rx="2" fill="#93c5fd" opacity="0.92"/>
          <rect x="44" y="13" width="22" height="14" rx="2" fill="#93c5fd" opacity="0.92"/>
          <rect x="72" y="13" width="22" height="14" rx="2" fill="#bfdbfe" opacity="0.9"/>
          <rect x="100" y="13" width="22" height="14" rx="2" fill="#93c5fd" opacity="0.92"/>
          <rect x="128" y="13" width="22" height="14" rx="2" fill="#93c5fd" opacity="0.92"/>
          <rect x="156" y="13" width="14" height="14" rx="2" fill="#93c5fd" opacity="0.7"/>
          <!-- Windshield -->
          <rect x="174" y="11" width="12" height="22" rx="2" fill="#7dd3fc" opacity="0.85"/>
          <!-- Headlights -->
          <circle class="bus-headlight" cx="189" cy="42" r="5" fill="#fef08a"/>
          <circle class="bus-headlight" cx="189" cy="42" r="8" fill="#fef08a" opacity="0.25"/>
          <!-- Tail lights -->
          <rect x="8" y="16" width="5" height="9" rx="1" fill="#ef4444" opacity="0.9"/>
          <rect x="8" y="36" width="5" height="9" rx="1" fill="#ef4444" opacity="0.7"/>
          <!-- Door -->
          <rect x="54" y="36" width="16" height="22" rx="1" fill="#1d4ed8"/>
          <line x1="62" y1="36" x2="62" y2="58" stroke="#3b82f6" stroke-width="1"/>
          <!-- Bumper -->
          <rect x="170" y="52" width="28" height="6" rx="2" fill="#334155"/>
          <!-- Under body -->
          <rect x="8" y="58" width="182" height="4" rx="2" fill="#0f172a"/>
          <!-- Wheel 1 -->
          <g transform="translate(40,66)">
            <circle class="bus-wheel" cx="0" cy="0" r="13" fill="#1e293b" stroke="#475569" stroke-width="2"/>
            <circle cx="0" cy="0" r="7" fill="#334155"/>
            <circle cx="0" cy="0" r="2.5" fill="#94a3b8"/>
            <line x1="-7" y1="0" x2="7" y2="0" stroke="#94a3b8" stroke-width="1.5" opacity="0.55"/>
            <line x1="0" y1="-7" x2="0" y2="7" stroke="#94a3b8" stroke-width="1.5" opacity="0.55"/>
            <line x1="-5" y1="-5" x2="5" y2="5" stroke="#94a3b8" stroke-width="1" opacity="0.35"/>
            <line x1="5" y1="-5" x2="-5" y2="5" stroke="#94a3b8" stroke-width="1" opacity="0.35"/>
          </g>
          <!-- Wheel 2 -->
          <g transform="translate(155,66)">
            <circle class="bus-wheel" cx="0" cy="0" r="13" fill="#1e293b" stroke="#475569" stroke-width="2"/>
            <circle cx="0" cy="0" r="7" fill="#334155"/>
            <circle cx="0" cy="0" r="2.5" fill="#94a3b8"/>
            <line x1="-7" y1="0" x2="7" y2="0" stroke="#94a3b8" stroke-width="1.5" opacity="0.55"/>
            <line x1="0" y1="-7" x2="0" y2="7" stroke="#94a3b8" stroke-width="1.5" opacity="0.55"/>
            <line x1="-5" y1="-5" x2="5" y2="5" stroke="#94a3b8" stroke-width="1" opacity="0.35"/>
            <line x1="5" y1="-5" x2="-5" y2="5" stroke="#94a3b8" stroke-width="1" opacity="0.35"/>
          </g>
          <!-- SRT text -->
          <text x="95" y="52" font-family="Poppins,sans-serif" font-size="8.5" font-weight="700" fill="white" text-anchor="middle" opacity="0.88">SHREE RAM TRAVELS</text>
        </svg>
      </div>
    </div>

    <div class="splash-loading">
      <div class="splash-loading-text">Loading</div>
      <div class="splash-dots"><span></span><span></span><span></span></div>
    </div>
  </div>
  <!-- ======== END SPLASH ======== -->


  <!-- ======== MAIN CONTENT ======== -->
  <div id="main-content">

    <nav class="navbar">
      <div class="container">
        <div class="nav-content">
          <a href="index.html" class="nav-brand">
            <img src="https://i.ibb.co/TqYcn7bS/shree-ram-logo-new.png" alt="Shree Ram Travels" style="height: 50px;">
          </a>
          <button class="mobile-menu-btn" id="mobile-menu-btn">â˜°</button>
          <ul class="nav-links" id="mobile-menu">
            <li><a href="index.html" class="nav-link active">Home</a></li>
            <li><a href="timings.html" class="nav-link">Bus Timings</a></li>
            <li><a href="admin.html" class="nav-link">Admin</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <section class="hero">
      <div class="hero-bg">
        <img src="https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?q=80&w=2069&auto=format&fit=crop" alt="Luxury Bus Travel">
      </div>
      <div class="hero-overlay"></div>
      <div class="hero-content">
        <h1 class="hero-title">
          Journey with <span class="highlight">Comfort</span>
        </h1>
        <p class="hero-subtitle">
          Experience the finest bus travel across India. Luxury sleepers, AC coaches, and on-time service.
        </p>
      </div>
    </section>

    <section class="container px-4">
      <div class="booking-card animate-on-scroll">
        <h2 style="font-size: 1.5rem; margin-bottom: 1.5rem; text-align: center; color: var(--secondary);">
          Search Bus Schedules
        </h2>
        <form class="booking-form" onsubmit="searchBuses(event)">
          <div class="form-group">
            <label class="form-label">From</label>
            <select class="form-select" id="search-origin" required>
              <option value="">Select Origin City</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">To</label>
            <select class="form-select" id="search-destination" required>
              <option value="">Select Destination City</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Date</label>
            <input type="date" class="form-input" id="search-date" required>
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-primary btn-lg btn-block">Search Buses</button>
          </div>
        </form>
      </div>
    </section>

    <section style="background: white; padding: 6rem 0; border-top: 1px solid var(--slate-100);">
      <div class="container px-4" style="display: grid; grid-template-columns: 1fr; gap: 3rem;">
        <div>
          <h2 style="margin-bottom: 1.5rem;">Track Your Ticket Status</h2>
          <p class="text-muted" style="font-size: 1.125rem; margin-bottom: 2rem;">
            Enter your booking token ID to check live status, view seat details, or download your ticket.
          </p>
          <form onsubmit="trackTicket(event)" style="max-width: 500px;">
            <div style="display: flex; gap: 1rem;">
              <input type="text" class="form-input" id="track-token" placeholder="Enter Token ID (e.g. TKT-123)" style="height: 3rem; font-size: 1rem;">
              <button type="submit" class="btn btn-primary btn-lg">Track</button>
            </div>
          </form>
          <div id="track-result" style="margin-top: 2rem;"></div>
        </div>
      </div>
    </section>

    <section class="py-8" style="padding-top: 6rem; padding-bottom: 6rem;">
      <div class="container px-4">
        <div class="text-center mb-8" style="margin-bottom: 4rem;">
          <h2 style="margin-bottom: 1rem;">Why Choose Shree Ram Travels?</h2>
          <div style="height: 4px; width: 80px; background: var(--primary); margin: 0 auto; border-radius: 2px;"></div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3" style="gap: 2rem;">
          <div class="card animate-on-scroll" style="text-align: center;">
            <div style="height: 64px; width: 64px; background: rgba(255,107,53,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem; color: var(--primary); font-size: 2rem;">ğŸ›¡ï¸</div>
            <h3 style="font-size: 1.25rem; margin-bottom: 0.75rem;">Safe & Secure</h3>
            <p class="text-muted">Sanitized buses & verified drivers</p>
          </div>
          <div class="card animate-on-scroll" style="text-align: center;">
            <div style="height: 64px; width: 64px; background: rgba(255,107,53,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem; color: var(--primary); font-size: 2rem;">â°</div>
            <h3 style="font-size: 1.25rem; margin-bottom: 0.75rem;">On Time</h3>
            <p class="text-muted">Punctual departures and arrivals guaranteed</p>
          </div>
          <div class="card animate-on-scroll" style="text-align: center;">
            <div style="height: 64px; width: 64px; background: rgba(255,107,53,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem; color: var(--primary); font-size: 2rem;">ğŸ“</div>
            <h3 style="font-size: 1.25rem; margin-bottom: 0.75rem;">Live Tracking</h3>
            <p class="text-muted">Track your bus in real-time with GPS</p>
          </div>
        </div>
      </div>
    </section>

    <section style="background: var(--slate-50); padding: 6rem 0; border-top: 1px solid var(--slate-100);">
      <div class="container px-4">
        <div class="text-center" style="margin-bottom: 3rem;">
          <h2 style="margin-bottom: 1rem;">Find Our Office</h2>
          <p class="text-muted" style="font-size: 1.1rem;">ğŸ“ New Shri Ram Travels, VPO Nathuawala, Dehradun, Uttarakhand 248004</p>
          <div style="height: 4px; width: 80px; background: var(--primary); margin: 1rem auto 0; border-radius: 2px;"></div>
        </div>
        <div style="border-radius: 1rem; overflow: hidden; box-shadow: var(--shadow); border: 1px solid var(--slate-100); max-width: 900px; margin: 0 auto;">
          <iframe
            src="https://maps.google.com/maps?width=625&height=325&hl=en&q=shree ram tours and travels&t=&z=15&ie=UTF8&iwloc=B&output=embed"
            width="100%" height="400" style="border:0; display:block;"
            allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
          </iframe>
        </div>
        <div style="text-align:center; margin-top: 1.5rem; display:flex; gap:1rem; justify-content:center; flex-wrap:wrap;">
          <a href="https://maps.google.com/maps?q=shree+ram+tours+and+travels&z=15" target="_blank" class="btn btn-primary">ğŸ—ºï¸ Open in Google Maps</a>
          <a href="https://maps.google.com/maps?q=shree+ram+tours+and+travels&z=15&dirflg=d" target="_blank" class="btn btn-outline">ğŸ§­ Get Directions</a>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div class="container px-4">
        <div class="footer-grid">
          <div>
            <img src="https://i.ibb.co/TqYcn7bS/shree-ram-logo-new.png" alt="Shree Ram Travels" style="height: 60px; margin-bottom: 1rem;">
            <p style="color: var(--slate-400); font-size: 0.875rem; margin-bottom: 0.75rem;">
              Connecting cities, connecting hearts. The most trusted bus operator in the region.
            </p>
            <p style="color: var(--slate-400); font-size: 0.8rem; line-height: 1.6;">
              ğŸ“ New Shri Ram Travels,<br>VPO Nathuawala, Dehradun,<br>Uttarakhand 248004
            </p>
          </div>
          <div>
            <h4>Quick Links</h4>
            <ul>
              <li><a href="timings.html">Bus Timings</a></li>
              <li><a href="admin.html">Operator Login</a></li>
              <li><a href="terms.html">Terms &amp; Conditions</a></li>
            </ul>
          </div>
          <div>
            <h4>Contact</h4>
            <ul style="color: var(--slate-400); font-size: 0.875rem;">
              <li><a href="mailto:shreeram@example.com" style="color: var(--slate-400); text-decoration: none;">âœ‰ï¸ shreeram@example.com</a></li>
              <li><a href="tel:+919870995956" style="color: var(--slate-400); text-decoration: none;">ğŸ“ +91 98709 95956</a></li>
            </ul>
          </div>
        </div>
        <div style="border-top: 1px solid rgba(255,255,255,0.1); margin-top: 2rem; padding-top: 1.5rem; text-align: center;">
          <p style="color: var(--slate-500); font-size: 0.8rem;">
            Â© 2025 Shree Ram Travels. All rights reserved. |
            <a href="terms.html" style="color: var(--slate-400); text-decoration: none;">Terms &amp; Conditions</a>
          </p>
        </div>
      </div>
    </footer>

  </div><!-- end #main-content -->

  <script src="js/data.js"></script>
  <script src="js/main.js"></script>
  <script>
    // â”€â”€â”€ Splash & Background Data Loading â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    var citiesDataPromise = null;

    function preloadCityData() {
      citiesDataPromise = Promise.all([
        getOriginCities(),
        getDestinationCities()
      ]);
      return citiesDataPromise;
    }

    async function populateCityDropdowns() {
      try {
        var results = await citiesDataPromise;
        var origins = results[0];
        var destinations = results[1];

        var originSelect = document.getElementById('search-origin');
        var destinationSelect = document.getElementById('search-destination');

        originSelect.innerHTML = '<option value="">From City</option>';
        destinationSelect.innerHTML = '<option value="">To City</option>';

        origins.forEach(function(city) {
          var o = document.createElement('option');
          o.value = city; o.textContent = city;
          originSelect.appendChild(o);
        });
        destinations.forEach(function(city) {
          var o = document.createElement('option');
          o.value = city; o.textContent = city;
          destinationSelect.appendChild(o);
        });
      } catch (error) {
        console.error('Error loading cities:', error);
        showToast('Failed to load cities. Please refresh.', 'error');
      }
    }

    function dismissSplash() {
      var splash = document.getElementById('splash-screen');
      var content = document.getElementById('main-content');
      splash.classList.add('fade-out');
      content.classList.add('visible');
      setTimeout(function() { splash.remove(); }, 800);
    }

    document.addEventListener('DOMContentLoaded', function() {
      // 1. Kick off API calls immediately â€” runs during splash animation
      preloadCityData();

      // 2. Set date defaults
      var dateInput = document.getElementById('search-date');
      if (dateInput) {
        dateInput.min = new Date().toISOString().split('T')[0];
        dateInput.value = new Date().toISOString().split('T')[0];
      }

      // 3. Wait for BOTH: minimum splash display time + data ready
      var SPLASH_DURATION = 4000; // ms â€” gives bus animation time to complete

      Promise.all([
        citiesDataPromise.catch(function() { return [[], []]; }),
        new Promise(function(resolve) { setTimeout(resolve, SPLASH_DURATION); })
      ]).then(function() {
        populateCityDropdowns();
        dismissSplash();
      });
    });

    // â”€â”€â”€ Search â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    function searchBuses(e) {
      e.preventDefault();
      var origin = document.getElementById('search-origin').value;
      var destination = document.getElementById('search-destination').value;
      var date = document.getElementById('search-date').value;
      if (!origin || !destination || !date) {
        showToast('Please fill all search fields', 'warning');
        return;
      }
      navigateTo('timings.html', { origin: origin, destination: destination, date: date });
    }

    // â”€â”€â”€ Track Ticket â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    async function trackTicket(e) {
      e.preventDefault();
      var token = document.getElementById('track-token').value.trim();
      if (!token) { showToast('Please enter a booking token', 'warning'); return; }
      var resultDiv = document.getElementById('track-result');
      try {
        showLoading();
        var booking = await getBookingByToken(token);
        hideLoading();
        if (booking) {
          var schedule = booking.scheduleId ?
            (typeof booking.scheduleId === 'object' ? booking.scheduleId : await getScheduleById(booking.scheduleId))
            : null;
          resultDiv.innerHTML = '<div style="background:#D1FAE5;border:1px solid #A7F3D0;border-radius:0.75rem;padding:1.5rem;"><h4 style="color:#065F46;font-weight:700;margin-bottom:1rem;">Booking Confirmed!</h4><div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;font-size:0.875rem;"><div><span style="display:block;color:#047857;font-size:0.75rem;text-transform:uppercase;">Passenger</span><span style="font-weight:600;">' + booking.customerName + '</span></div><div><span style="display:block;color:#047857;font-size:0.75rem;text-transform:uppercase;">Seats</span><span style="font-weight:600;">' + booking.seatNumbers.join(', ') + '</span></div><div><span style="display:block;color:#047857;font-size:0.75rem;text-transform:uppercase;">Amount</span><span style="font-weight:600;">&#8377;' + booking.totalAmount + '</span></div><div><span style="display:block;color:#047857;font-size:0.75rem;text-transform:uppercase;">Bus</span><span style="font-weight:600;">' + (schedule ? schedule.busName : 'N/A') + '</span></div></div></div>';
          showToast('Booking found!', 'success');
        } else {
          resultDiv.innerHTML = '<div style="background:#FEE2E2;border:1px solid #FECACA;border-radius:0.75rem;padding:1.5rem;text-align:center;color:#991B1B;"><strong>Booking not found!</strong><br>Please check your booking token and try again.</div>';
          showToast('Booking not found', 'error');
        }
      } catch (error) {
        hideLoading();
        resultDiv.innerHTML = '<div style="background:#FEE2E2;border:1px solid #FECACA;border-radius:0.75rem;padding:1.5rem;text-align:center;color:#991B1B;"><strong>Error!</strong><br>Unable to track booking. Please try again.</div>';
        showToast('Error tracking booking', 'error');
      }
    }
  </script>
</body>
</html>